{"version":3,"sources":["unauthenticated-app/login.tsx","unauthenticated-app/register.tsx","assets/logo.svg","assets/left.svg","assets/right.svg","unauthenticated-app/index.tsx"],"names":["LoginScreen","onError","login","useAuth","useAsync","undefined","throwOnError","run","isLoading","handleSubmit","value","a","onFinish","Item","name","rules","required","message","placeholder","type","id","LongButton","loading","htmlType","RegisterScreen","register","cpassword","values","password","Error","UnauthenticatedApp","useState","isRegister","setIsRegister","error","setError","useDocumentTitle","Container","Header","Background","ShadowCard","Title","onClick","styled","Button","h2","div","left","right","header","logo","Card"],"mappings":"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","file":"static/js/6.26fd9e32.chunk.js","sourcesContent":["import { useAuth } from '../context/auth-context';\r\nimport { Form, Input } from 'antd';\r\nimport { LongButton } from '.';\r\nimport { useAsync } from '../utils/use-async';\r\n\r\nexport const LoginScreen = ({ onError }: { onError: (error: Error) => void }) => {\r\n  const { login } = useAuth()\r\n  const { run, isLoading } = useAsync(undefined, { throwOnError: true })\r\n\r\n  const handleSubmit = async (value: {\r\n    username: string,\r\n    password: string\r\n  }) => {\r\n    try {\r\n      await run(login(value))\r\n    } catch (e) {\r\n      onError(e)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Form onFinish={handleSubmit}>\r\n      <Form.Item name={'username'} rules={[{ required: true, message: '请输入用户名' }]}>\r\n        <Input placeholder={'用户名'} type=\"text\" id={'username'} />\r\n      </Form.Item>\r\n      <Form.Item name={'password'} rules={[{ required: true, message: '请输入密码' }]}>\r\n        <Input placeholder={'密码'} type=\"password\" id={'password'} />\r\n      </Form.Item>\r\n      <Form.Item>\r\n        <LongButton loading={isLoading} htmlType={'submit'} type={\"primary\"}>登录</LongButton>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n}","import { Form } from 'antd';\r\nimport { LongButton } from '.';\r\nimport { useAuth } from '../context/auth-context';\r\nimport { useAsync } from '../utils/use-async';\r\n\r\nexport const RegisterScreen = ({ onError }: { onError: (error: Error) => void }) => {\r\n\r\n  const { register } = useAuth()\r\n  const { run, isLoading } = useAsync(undefined, { throwOnError: true })\r\n\r\n  const handleSubmit = async ({ cpassword, ...values }: { username: string, password: string, cpassword: string }) => {\r\n    if (cpassword !== values.password) {\r\n      onError(new Error('请确认两次输入的密码相同'))\r\n      return\r\n    }\r\n    try {\r\n      await run(register(values))\r\n    } catch (e) {\r\n      onError(e)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Form onFinish={handleSubmit}>\r\n      <Form.Item name=\"{'username'}\" rules={[{ required: true, message: '请输入用户名' }]}>\r\n        <input placeholder={'用户名'} type=\"text\" id={'username'} />\r\n      </Form.Item>\r\n      <Form.Item name=\"{password}\" rules={[{ required: true, message: '请输入密码' }]}>\r\n        <input placeholder={'密码'} type=\"password\" id={'password'} />\r\n      </Form.Item>\r\n      <Form.Item name=\"{cpassword}\" rules={[{ required: true, message: '请确认密码' }]}>\r\n        <input placeholder={'确认密码'} type=\"password\" id={'cpassword'} />\r\n      </Form.Item>\r\n      <Form.Item>\r\n        <LongButton loading= { isLoading } htmlType=\"submit\" type={\"primary\"}>注册</LongButton>\r\n      </Form.Item>\r\n    </Form>\r\n  )\r\n}","export default __webpack_public_path__ + \"static/media/logo.6c866125.svg\";","export default __webpack_public_path__ + \"static/media/left.e74de3ec.svg\";","export default __webpack_public_path__ + \"static/media/right.b423a6cf.svg\";","import { Button, Card, Divider } from \"antd\"\r\nimport React, { useState } from \"react\"\r\nimport { LoginScreen } from \"./login\"\r\nimport { RegisterScreen } from \"./register\"\r\nimport styled from '@emotion/styled'\r\nimport logo from '../assets/logo.svg'\r\nimport left from '../assets/left.svg'\r\nimport right from '../assets/right.svg'\r\nimport { ErrorBox } from \"../components/lib\"\r\nimport { useDocumentTitle } from \"../utils\"\r\n\r\nexport default function UnauthenticatedApp (){\r\n  const [isRegister, setIsRegister] = useState(false)\r\n  const [error, setError] = useState<Error | null>(null)\r\n\r\n  useDocumentTitle('请登录注册以继续')\r\n  \r\n  return (\r\n    <Container>\r\n      <Header />\r\n      <Background />\r\n      <ShadowCard>\r\n        <Title>{isRegister ? '请注册' : '请登录'}</Title>\r\n        <ErrorBox error={error} />\r\n        {isRegister ? <RegisterScreen onError={setError} /> : <LoginScreen onError={setError} />}\r\n        <Divider />\r\n        <Button \r\n          type={\"link\"} \r\n          onClick={() => setIsRegister(!isRegister)}\r\n        >\r\n          {isRegister ? '已经有账号了？直接登录' : '没有账号？注册新账号'}\r\n        </Button>\r\n      </ShadowCard>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport const LongButton = styled(Button)`\r\n  width: 100%;\r\n`\r\n\r\nconst Title = styled.h2`\r\n  margin-bottom: 2.4rem;\r\n  color: rgb(94, 108, 132);\r\n`\r\n\r\nconst Background = styled.div`\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n  background-attachment: fixed;\r\n  background-position: left bottom, right bottom;\r\n  background-size: calc(((100vw - 40rem) / 2) - 3.2rem),\r\n    calc(((100vw - 40rem) / 2) - 3.2rem), cover;\r\n  background-image: url(${left}), url(${right});\r\n`\r\n\r\nconst Header = styled.header`\r\n  background: url(${logo}) no-repeat center;\r\n  padding: 5rem 0;\r\n  background-size: 8rem;\r\n  width: 100%;\r\n`;\r\n\r\nconst ShadowCard = styled(Card)`\r\n  width: 40rem;\r\n  min-height: 56rem;\r\n  padding: 3.2rem 4rem;\r\n  border-radius: 0.3rem;\r\n  box-sizing: border-box;\r\n  box-shadow: rgba(0, 0, 0, 0.1) 0 0 10px;\r\n  text-align: center;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n`;"],"sourceRoot":""}